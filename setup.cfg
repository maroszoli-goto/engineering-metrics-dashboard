# Import Linter Configuration for Clean Architecture
# Enforces layer boundaries to prevent architectural violations
#
# Layer Structure:
# 1. Presentation: src/dashboard/blueprints/, templates/, static/
# 2. Application: src/dashboard/services/
# 3. Domain: src/models/
# 4. Infrastructure: src/collectors/, src/utils/, src/config.py
#
# Dependency Rule: Presentation → Application → Domain
#                                   ↓
#                            Infrastructure → Domain (models only)

[importlinter]
root_package = src
include_external_packages = False

[importlinter:contract:1]
name = Domain layer must not import from other layers
type = forbidden
source_modules =
    src.models
forbidden_modules =
    src.dashboard
    src.collectors
    src.utils
    src.config
ignore_imports =
    # Temporarily ignore known violations until fixed (Phase 3.1)
    src.models.metrics -> src.utils.logging
    src.models.performance_scoring -> src.config

[importlinter:contract:2]
name = Presentation layer must not import Domain directly
type = forbidden
source_modules =
    src.dashboard.blueprints
forbidden_modules =
    src.models
ignore_imports =
    # Temporarily ignore known violation until fixed (Phase 3.2)
    src.dashboard.blueprints.dashboard -> src.models.metrics

[importlinter:contract:3]
name = Presentation layer must not import Infrastructure
type = forbidden
source_modules =
    src.dashboard.blueprints
forbidden_modules =
    src.collectors
    src.utils
ignore_imports =
    # Temporarily ignore logging imports until fixed (Phase 3.2)
    src.dashboard.blueprints.api -> src.utils.logging
    src.dashboard.blueprints.dashboard -> src.utils.logging
    src.dashboard.blueprints.export -> src.utils.logging
    src.dashboard.blueprints.settings -> src.utils.logging

[importlinter:contract:4]
name = Infrastructure must not import Presentation
type = forbidden
source_modules =
    src.collectors
    src.utils
forbidden_modules =
    src.dashboard.blueprints
    src.dashboard.templates
ignore_imports =
    # Temporarily ignore performance imports until fixed (Phase 3.3)
    src.collectors.github_graphql_collector -> src.dashboard.utils.performance
    src.collectors.jira_collector -> src.dashboard.utils.performance

[importlinter:contract:5]
name = Infrastructure must not import Application services
type = forbidden
source_modules =
    src.collectors
    src.utils
forbidden_modules =
    src.dashboard.services

[importlinter:contract:6]
name = Application layer must not import Presentation
type = forbidden
source_modules =
    src.dashboard.services
forbidden_modules =
    src.dashboard.blueprints
